// Our labels along the x-axis
var dates = ['2019-11-04', '2019-11-11', '2019-11-18', '2019-11-25', '2019-12-02', '2019-12-09', '2019-12-16', '2019-12-23', '2019-12-30', '2020-01-06', '2020-01-13', '2020-01-20', '2020-01-27', '2020-02-03', '2020-02-17', '2020-02-24', '2020-03-02', '2020-03-09', '2020-03-16', '2020-03-23', '2020-03-30', '2020-04-06', '2020-04-13', '2020-04-20', '2020-04-27'];
 // For drawing the lines
var nyc = [85.23711413312512, 85.11882538263843, 78.66876658797514, 89.98097873631906, 85.37867544883258, 79.96690128218077, 95.93708254047672, 97.70747152103864, 92.86164522401931, 84.93340274450802, 86.184308463338, 6.667959260119826, 72.28630839683616, 63.71844027009881, 44.48836017323233, 87.46309573341487, 73.9863172190566, 60.21636047124894, 48.84494678762149, 32.30076910207623, 26.446890624954328, 26.22285689181168, 28.62015639797238, 35.046636305892875, 11.856908246523329];
var la = [95.78917812461373, 101.07660059477894, 93.89271336102816, 117.4328297458182, 99.86182376091135, 104.66483260977866, 119.71217644946236, 124.23430986372101, 112.24249995066084, 91.39830351464735, 87.14237564160244, 2.0556391133393057, 74.9284573088125, 74.94532619615592, 46.30524595636867, 90.22124440487305, 81.46785792098648, 72.48352382084558, 54.94591331780683, 44.931497198261404, 39.76435445376856, 36.271157148666965, 43.474537644094546, 48.53549662308694, 18.077692199917095];
var chicago = [70.18084753618834, 69.17651802602968, 61.86288530242692, 72.84857483516906, 66.13836759495425, 64.10187341358936, 75.26791779030556, 76.07221962572478, 67.40628080030376, 56.35349563240994, 59.94999342758238, 0.14706279329160266, 55.339527054078886, 48.783947729186366, 34.993873681343274, 61.85383333957007, 60.54856132561096, 46.75101180844382, 32.729288710899205, 21.52826494188235, 19.655379658231784, 17.442697582560825, 18.978752434907705, 22.810621386132087, 5.9209319235811675];
var houston = [52.60460645116423, 52.86765599222628, 51.653485794826224, 64.80592743624028, 50.20706350697986, 50.340732134190766, 55.14109748903455, 62.57959022734071, 56.598229088213884, 50.71075451671681, 48.22257628510641, 0.9795353733473254, 41.79525072308535, 38.717109418267775, 32.98156368376865, 50.28745997142406, 47.18778363860733, 48.589310458690605, 35.939691090380975, 23.93051140742849, 16.86811752508739, 17.412389378486694, 21.861252076824094, 25.20877926326304, 9.293211337856796];
var phoenix = [52.96559860903224, 65.94397351737547, 49.66024201047953, 65.91827174826007, 53.87652367513626, 56.18404703264435, 62.04315927129466, 60.52226916655457, 65.70156201223374, 47.52964305126215, 51.23724771792264, 6.880316011865477, 47.445134077972405, 35.346410084678915, 24.559665554259038, 58.47117653418292, 50.79188141684409, 54.620984665924034, 32.582706781322905, 22.83635253789364, 16.968257150009922, 14.717147922321566, 18.36580296341743, 20.544825910867484, 7.809489381495956];
var philadelphia = [56.07286042296712, 56.094293082995556, 53.83331394073, 58.52077540251829, 55.03341226158674, 47.70670594393978, 52.425617590677106, 51.67542623820402, 50.34420615608477, 51.82587056145808, 47.667288244490344, 8.137747744555273, 46.41992829375813, 39.25104226333762, 30.214803548991604, 58.75645833193859, 60.574325571007755, 43.78476609192035, 28.08482908557549, 19.99511753636909, 15.431695506350662, 12.919531655915222, 16.981098626916197, 19.41222878816873, 11.053821741495648];
//var jacksonville = [52.891942482047796, 117.46935921252668, 57.371506865781605, 78.07871628271015, 56.373743533782644, 61.81054376387465, 52.14118273273366, 80.013424578863, 51.967463250948754, 43.295519455911496, 30.485447939370502, nan, nan, nan, nan, nan, nan, nan, nan, nan, nan, nan, nan, nan, nan];

var impdates = ['2020-03-16', '2020-01-20'];
var amount = ["White House guideline", "1st US case"];
// populate 'annotations' array dynamically based on 'marketing'
var annotate = impdates.map(function(date, index) {
   return {
      type: 'line',
      id: 'vline' + index,
      mode: 'vertical',
      scaleID: 'x-axis-0',
      value: date,
      borderColor: 'red',
      borderWidth: 3,
      label: {
         enabled: true,
         position: "top",
         content: amount[index]
      }
   }
});

var ctx = document.getElementById("cityChart");
var cityChart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: dates,
    datasets: [{
        data: nyc,
        label: "New York City",
        borderColor: "#006600",
        fill: false
      },
      {
        data: la,
        label: "Los Angeles",
        borderColor: "#006600",
        fill: false
      },
      {
        data: chicago,
        label: "Chicago",
        borderColor: "#006600",
        fill: false
      },
      {
        data: houston,
        label: "Houston",
        borderColor: "#006600",
        fill: false
      },
      {
        data: phoenix,
        label: "Phoenix",
        borderColor: "#006600",
        fill: false
      },
      {
        data: philadelphia,
        label: "Philadelphia",
        borderColor: "#006600",
        fill: false
      }
    ]
  },
  options: {
        scales: {
           yAxes: [{
              ticks: {
                 beginAtZero: true
              }
           }]
        },
        annotation: {
           //drawTime: 'afterDatasetsDraw',
           annotations: annotate
        }
     }
});
